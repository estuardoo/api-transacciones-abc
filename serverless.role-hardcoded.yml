
service: api-transacciones
provider:
  name: aws
  runtime: python3.12
  region: us-east-1
  stage: dev
  iam:
    role: arn:aws:iam::<ACCOUNT_ID>:role/lambda-exec-transacciones  # <--- REEMPLAZA <ACCOUNT_ID> SI QUIERES EVITAR VARIABLES
  environment:
    TABLA_TRANSACCION: TablaTransaccion
  httpApi: { cors: true }

functions:
  ImportComercios: { handler: ImportComercios.lambda_handler, events: [ { httpApi: { path: /import/comercios, method: POST } } ] }
  ImportTransacciones: { handler: ImportTransacciones.lambda_handler, events: [ { httpApi: { path: /import/transacciones, method: POST } } ] }
  BusquedaTransaccion: { handler: BusquedaTransaccion.lambda_handler, events: [ { httpApi: { path: /transacciones/buscar-por-id, method: GET } } ] }
  BusquedaCliente: { handler: BusquedaCliente.lambda_handler, events: [ { httpApi: { path: /transacciones/buscar-cliente, method: GET } } ] }
  BusquedaTarjeta: { handler: BusquedaTarjeta.lambda_handler, events: [ { httpApi: { path: /transacciones/buscar-tarjeta, method: GET } } ] }
  BusquedaComercio: { handler: BusquedaComercio.lambda_handler, events: [ { httpApi: { path: /transacciones/buscar-comercio, method: GET } } ] }
